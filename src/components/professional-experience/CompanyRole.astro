---
interface Props {
  title: string;
  period: string;
  description?: string;
  isCurrent?: boolean;
  isLast?: boolean;
}

const { title, period, description, isCurrent = false, isLast = false } = Astro.props;

// Helper function to process description lines
const processDescription = (text: string) => {
  if (!text) return [];
  return text.split('\n').map(line => ({
    isBullet: line.startsWith('- '),
    content: line.startsWith('- ') ? line.substring(2) : line
  }));
};

const descriptionLines = processDescription(description || '');
---

<div class="role relative group">
  
  <div class="brutal-card group-hover:translate-x-1 transition-all duration-200 bg-gray-50 dark:bg-zinc-800 border-2 border-black dark:border-white">
    <div class="p-6">
      <div class="flex flex-wrap items-baseline justify-between gap-2">
        <h4 class="font-display font-bold text-lg uppercase text-black dark:text-white">{title}</h4>
        
        <div class="flex items-center flex-wrap gap-2">
          {isCurrent && (
            <span class="border-2 border-black dark:border-white bg-neo-yellow text-black px-2 py-0.5 text-xs font-bold uppercase">Current</span>
          )}
          <p class:list={[
            "text-sm",
            isCurrent ? "text-neo-yellow font-medium" : "text-gray-600 dark:text-gray-400"
          ]}>
            {period}
          </p>
        </div>
      </div>
      
      <!-- Role description with better typography -->
      {description && (
        <div class="mt-4 text-sm font-medium text-black dark:text-white border-t-2 border-black dark:border-white pt-4 leading-relaxed space-y-2">
          {descriptionLines.map((line) => (
            line.isBullet ? (
              <div class="flex items-start">
                <span class="mr-3 mt-1.5 w-2 h-2 bg-neo-pink border border-black dark:border-white flex-shrink-0"></span>
                <span>{line.content}</span>
              </div>
            ) : (
              <p>{line.content}</p>
            )
          ))}
        </div>
      )}
    </div>
  </div>
</div>