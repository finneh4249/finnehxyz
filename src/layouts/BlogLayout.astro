---
import BaseLayout from './BaseLayout.astro';
import { Icon } from 'astro-icon/components';

const { frontmatter } = Astro.props;

// Format date helper
function formatDate(dateString: string) {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

// Calculate reading time (rough estimate: 200 words per minute)
function calculateReadingTime(content: string) {
  const wordsPerMinute = 200;
  const wordCount = content.trim().split(/\s+/).length;
  const readingTime = Math.ceil(wordCount / wordsPerMinute);
  return readingTime;
}
---

<BaseLayout 
  title={frontmatter.title} 
  description={frontmatter.description}
>
  <article class="min-h-screen bg-white dark:bg-gray-900 py-20 px-4 relative overflow-hidden">
    
    <!-- Background Elements -->
    <div class="absolute inset-0 pointer-events-none">
      <!-- Diagonal stripe background pattern -->
      <div class="absolute inset-0 opacity-5 dark:opacity-10">
        <div class="absolute inset-0" style={{
          backgroundImage: `
            repeating-linear-gradient(
              45deg,
              transparent,
              transparent 20px,
              #000 20px,
              #000 22px
            )
          `,
        }}></div>
      </div>
      
      <!-- Floating Shapes -->
      <div class="absolute top-20 right-10 w-32 h-32 bg-neo-yellow border-4 border-black dark:border-white shadow-brutal rotate-12 opacity-50"></div>
      <div class="absolute bottom-40 left-10 w-40 h-40 bg-neo-pink border-4 border-black dark:border-white shadow-brutal -rotate-12 opacity-50"></div>
    </div>

    <div class="max-w-4xl mx-auto relative z-10">
      
      <!-- Back to Blog -->
      <a 
        href="/blog"
        class="inline-flex items-center gap-2 mb-8 text-lg font-bold hover:gap-4 transition-all text-black dark:text-white hover:text-pink-600"
      >
        <Icon name="mdi:arrow-left" class="text-2xl" />
        <span>Back to Blog</span>
      </a>

      <!-- Article Header -->
      <header class="mb-12 pb-8 border-b-4 border-black dark:border-white">
        <!-- Tags -->
        {frontmatter.tags && (
          <div class="flex flex-wrap gap-2 mb-6">
            {frontmatter.tags.map((tag: string) => (
              <span class="px-4 py-2 bg-yellow-400 text-black text-sm font-bold border-2 border-black uppercase tracking-wide">
                {tag}
              </span>
            ))}
          </div>
        )}

        <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight text-black dark:text-white">
          {frontmatter.title}
        </h1>

        <!-- Meta Info -->
        <div class="flex flex-wrap items-center gap-6 text-lg font-bold text-gray-700 dark:text-gray-300">
          <div class="flex items-center gap-2">
            <Icon name="mdi:account" class="text-2xl" style="color: #FF006E;" />
            <span>{frontmatter.author}</span>
          </div>
          <div class="flex items-center gap-2">
            <Icon name="mdi:calendar" class="text-2xl" style="color: #00B4D8;" />
            <time datetime={frontmatter.date}>
              {formatDate(frontmatter.date)}
            </time>
          </div>
        </div>
      </header>

      <!-- Article Content -->
      <div class="prose prose-lg dark:prose-invert max-w-none blog-content">
        <slot />
      </div>

      <!-- Article Footer -->
      <footer class="mt-16 pt-8 border-t-4 border-black dark:border-white">
        <div class="brutal-card p-8 border-4 border-black dark:border-white" style="background: #FF006E;">
          <h3 class="text-2xl font-black mb-4 text-white">About the Author</h3>
          <p class="text-lg mb-4 text-white">
            I'm Ethan Cornwill. 13+ years building software, 10 years managing QSR operations. 
            I architect AI systems that survive production, not just demos that die in staging.
          </p>
          <div class="flex flex-wrap gap-4">
            <a href="mailto:mail@finneh.xyz" class="inline-flex items-center gap-2 px-4 py-2 bg-white text-black font-bold border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-all">
              <Icon name="mdi:email" />
              <span>Email Me</span>
            </a>
            <a href="https://github.com/finneh4249" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 bg-white text-black font-bold border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-all">
              <Icon name="mdi:github" />
              <span>GitHub</span>
            </a>
            <a href="https://linkedin.com/in/ethan-cornwill" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 bg-white text-black font-bold border-2 border-black hover:translate-x-1 hover:translate-y-1 transition-all">
              <Icon name="mdi:linkedin" />
              <span>LinkedIn</span>
            </a>
          </div>
        </div>
      </footer>

    </div>
  </article>
</BaseLayout>

<style is:global>
  /* Blog Content Styling with Fixed Contrast */
  .blog-content {
    line-height: 1.8;
  }

  .blog-content h2 {
    font-size: 2.5rem;
    font-weight: 900;
    margin-top: 3rem;
    margin-bottom: 1.5rem;
    line-height: 1.2;
    color: #000;
    border-bottom: 4px solid #FFE600;
    padding-bottom: 0.5rem;
  }

  .dark .blog-content h2 {
    color: #fff;
  }

  .blog-content h3 {
    font-size: 2rem;
    font-weight: 900;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    line-height: 1.3;
    color: #000;
  }

  .dark .blog-content h3 {
    color: #fff;
  }

  .blog-content h4 {
    font-size: 1.5rem;
    font-weight: 800;
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    color: #000;
  }

  .dark .blog-content h4 {
    color: #fff;
  }

  .blog-content p {
    margin-bottom: 1.5rem;
    font-size: 1.125rem;
    color: #1f2937;
  }

  .dark .blog-content p {
    color: #e5e7eb;
  }

  .blog-content ul,
  .blog-content ol {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
  }

  .blog-content li {
    margin-bottom: 0.75rem;
    font-size: 1.125rem;
    color: #1f2937;
  }

  .dark .blog-content li {
    color: #e5e7eb;
  }

  .blog-content strong {
    font-weight: 800;
    color: #FF006E;
  }

  .dark .blog-content strong {
    color: #FFE600;
  }

  .blog-content em {
    font-style: italic;
    color: #00B4D8;
  }

  .blog-content code {
    background: #FFE600;
    color: #000;
    padding: 0.25rem 0.5rem;
    border: 2px solid #000;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    font-weight: 600;
  }

  .blog-content pre {
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 1.5rem;
    border: 4px solid #000;
    overflow-x: auto;
    margin: 2rem 0;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 1);
  }

  .dark .blog-content pre {
    border-color: #fff;
  }

  .blog-content pre code {
    background: transparent;
    color: inherit;
    padding: 0;
    border: none;
    font-size: 0.95rem;
    line-height: 1.6;
    font-weight: 400;
  }

  .blog-content blockquote {
    border-left: 6px solid #FF006E;
    padding: 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    background: rgba(255, 0, 110, 0.1);
    border: 2px solid #FF006E;
    color: #000;
  }

  .dark .blog-content blockquote {
    color: #fff;
    background: rgba(255, 0, 110, 0.2);
  }

  .blog-content a {
    color: #FF006E;
    text-decoration: underline;
    font-weight: 700;
    transition: all 0.2s;
  }

  .blog-content a:hover {
    color: #00B4D8;
    text-decoration-thickness: 3px;
  }

  .blog-content hr {
    border: none;
    border-top: 4px solid #000;
    margin: 3rem 0;
  }

  .dark .blog-content hr {
    border-top-color: #fff;
  }

  /* Tables */
  .blog-content table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 2rem 0;
    border: 4px solid #000;
  }

  .dark .blog-content table {
    border-color: #fff;
  }

  .blog-content th {
    background: #FFE600;
    color: #000;
    font-weight: 900;
    padding: 1rem;
    text-align: left;
    border-bottom: 4px solid #000;
    border-right: 2px solid #000;
  }

  .dark .blog-content th {
    border-bottom-color: #fff;
    border-right-color: #fff;
  }

  .blog-content th:last-child {
    border-right: none;
  }

  .blog-content td {
    padding: 1rem;
    border-bottom: 2px solid #000;
    border-right: 2px solid #000;
    background: #fff;
    color: #000;
  }

  .dark .blog-content td {
    background: #1f2937;
    color: #fff;
    border-bottom-color: #fff;
    border-right-color: #fff;
  }

  .blog-content td:last-child {
    border-right: none;
  }

  .blog-content tr:last-child td {
    border-bottom: none;
  }
</style>
